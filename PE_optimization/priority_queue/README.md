# Priority Queue

## Single Priority Queue (length = 10)

folder: priority_queue_wrapper_unfixed

Only consumes 3337 LUTs (~0.3% of all).

```
================================================================
== Utilization Estimates
================================================================
* Summary: 
+---------------------+---------+------+---------+---------+-----+
|         Name        | BRAM_18K|  DSP |    FF   |   LUT   | URAM|
+---------------------+---------+------+---------+---------+-----+
|DSP                  |        -|     -|        -|        -|    -|
|Expression           |        -|     -|        0|     2520|    -|
|FIFO                 |        -|     -|        -|        -|    -|
|Instance             |        -|     -|        0|      161|    -|
|Memory               |        -|     -|        -|        -|    -|
|Multiplexer          |        -|     -|        -|      656|    -|
|Register             |        -|     -|     1849|        -|    -|
+---------------------+---------+------+---------+---------+-----+
|Total                |        0|     0|     1849|     3337|    0|
+---------------------+---------+------+---------+---------+-----+
|Available SLR        |     1344|  3008|   869120|   434560|  320|
+---------------------+---------+------+---------+---------+-----+
|Utilization SLR (%)  |        0|     0|    ~0   |    ~0   |    0|
+---------------------+---------+------+---------+---------+-----+
|Available            |     4032|  9024|  2607360|  1303680|  960|
+---------------------+---------+------+---------+---------+-----+
|Utilization (%)      |        0|     0|    ~0   |    ~0   |    0|
+---------------------+---------+------+---------+---------+-----+
```

## Single Priority Queue (length = 100)

folder: priority_queue_distance_results_fixed_len100

This consumes 32377 LUTs (~2.5% of all). As a result, if we have topK=100, then for each HBM channel we need 6 priority queues of length 100. Suppose 21 used HBM channels, that is 21 * 6 * 32377 = 4079502 LUTs, 3 times of all LUT resources. Thus topK=100 is impossible.

```
================================================================
== Utilization Estimates
================================================================
* Summary: 
+---------------------+---------+------+---------+---------+-----+
|         Name        | BRAM_18K|  DSP |    FF   |   LUT   | URAM|
+---------------------+---------+------+---------+---------+-----+
|DSP                  |        -|     -|        -|        -|    -|
|Expression           |        -|     -|        0|    26095|    -|
|FIFO                 |        -|     -|        -|        -|    -|
|Instance             |        -|     -|        0|     1045|    -|
|Memory               |        -|     -|        -|        -|    -|
|Multiplexer          |        -|     -|        -|     5237|    -|
|Register             |        -|     -|    16291|        -|    -|
+---------------------+---------+------+---------+---------+-----+
|Total                |        0|     0|    16291|    32377|    0|
+---------------------+---------+------+---------+---------+-----+
|Available SLR        |     1344|  3008|   869120|   434560|  320|
+---------------------+---------+------+---------+---------+-----+
|Utilization SLR (%)  |        0|     0|        1|        7|    0|
+---------------------+---------+------+---------+---------+-----+
|Available            |     4032|  9024|  2607360|  1303680|  960|
+---------------------+---------+------+---------+---------+-----+
|Utilization (%)      |        0|     0|    ~0   |        2|    0|
+---------------------+---------+------+---------+---------+-----+
```

## Priority Queue Wrapper (length = 10)

folder: priority_queue_wrapper_unfixed

Only consumes 6% LUT. 

FF = 53224

LUT = 85989

```
================================================================
== Utilization Estimates
================================================================
* Summary: 
+---------------------+---------+------+---------+---------+-----+
|         Name        | BRAM_18K|  DSP |    FF   |   LUT   | URAM|
+---------------------+---------+------+---------+---------+-----+
|DSP                  |        -|     -|        -|        -|    -|
|Expression           |        -|     -|        0|       20|    -|
|FIFO                 |        2|     -|    10158|     6723|    -|
|Instance             |        -|     -|    43060|    79210|    -|
|Memory               |        -|     -|        -|        -|    -|
|Multiplexer          |        -|     -|        -|       36|    -|
|Register             |        -|     -|        6|        -|    -|
+---------------------+---------+------+---------+---------+-----+
|Total                |        2|     0|    53224|    85989|    0|
+---------------------+---------+------+---------+---------+-----+
|Available SLR        |     1344|  3008|   869120|   434560|  320|
+---------------------+---------+------+---------+---------+-----+
|Utilization SLR (%)  |    ~0   |     0|        6|       19|    0|
+---------------------+---------+------+---------+---------+-----+
|Available            |     4032|  9024|  2607360|  1303680|  960|
+---------------------+---------+------+---------+---------+-----+
|Utilization (%)      |    ~0   |     0|        2|        6|    0|
+---------------------+---------+------+---------+---------+-----+

+ Detail: 
    * Instance: 
    +-------------------------------------------------+----------------------------------------------+---------+----+------+------+-----+
    |                     Instance                    |                    Module                    | BRAM_18K| DSP|  FF  |  LUT | URAM|
    +-------------------------------------------------+----------------------------------------------+---------+----+------+------+-----+
    |consume_and_redirect_sorted_streams_10000_66_U0  |consume_and_redirect_sorted_streams_10000_66  |        0|   0|  4201|  7740|    0|
    |insert_wrapper_10000_189_U0                      |insert_wrapper_10000_189                      |        0|   0|  1849|  3337|    0|
    |insert_wrapper_10000_4567_U0                     |insert_wrapper_10000_4567                     |        0|   0|  1848|  3368|    0|
    |insert_wrapper_10000_4668_U0                     |insert_wrapper_10000_4668                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_4769_U0                     |insert_wrapper_10000_4769                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_4870_U0                     |insert_wrapper_10000_4870                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_4971_U0                     |insert_wrapper_10000_4971                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5072_U0                     |insert_wrapper_10000_5072                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5173_U0                     |insert_wrapper_10000_5173                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5274_U0                     |insert_wrapper_10000_5274                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5375_U0                     |insert_wrapper_10000_5375                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5476_U0                     |insert_wrapper_10000_5476                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5577_U0                     |insert_wrapper_10000_5577                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5678_U0                     |insert_wrapper_10000_5678                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5779_U0                     |insert_wrapper_10000_5779                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5880_U0                     |insert_wrapper_10000_5880                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_5981_U0                     |insert_wrapper_10000_5981                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_6082_U0                     |insert_wrapper_10000_6082                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_6183_U0                     |insert_wrapper_10000_6183                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_6284_U0                     |insert_wrapper_10000_6284                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_6385_U0                     |insert_wrapper_10000_6385                     |        0|   0|  1847|  3359|    0|
    |insert_wrapper_10000_6486_U0                     |insert_wrapper_10000_6486                     |        0|   0|  1847|  3359|    0|
    |merge_streams_10000_10_87_U0                     |merge_streams_10000_10_87                     |        0|   0|    47|   835|    0|
    |send_iter_num_10000_200_88_U0                    |send_iter_num_10000_200_88                    |        0|   0|    22|   109|    0|
    +-------------------------------------------------+----------------------------------------------+---------+----+------+------+-----+
    |Total                                            |                                              |        0|   0| 43060| 79210|    0|
    +-------------------------------------------------+----------------------------------------------+---------+----+------+------+-----+
```